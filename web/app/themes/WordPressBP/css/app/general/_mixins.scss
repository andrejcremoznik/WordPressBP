// A string replace helper
@function str-replace($string, $search, $replace: '') {
  $index: str-index($string, $search);
  @if $index {
    @return str-slice($string, 1, $index - 1) + $replace + str-replace(str-slice($string, $index + str-length($search)), $search, $replace);
  }
  @return $string;
}

/**
 * Convert PX units to REMs.
 * Ex: font-size: rem(16);
 */
@function rem($pxval, $rootpxval: $default_font_size) {
  @return #{$pxval / $rootpxval}rem;
}

/**
 * Per-cent calculation
 * Ex: width: pc(600,960);
 */
@function pc($target, $container) {
  @return ($target / $container) * 100%;
}

/**
 * Asset public url helper
 * Ex: background: asset('image.jpg')
 * or: background: asset('shared_image.jpg', '/app/themes/WordPressBP/assets/')
 */
@function asset($file, $path: $public_assets_uri) {
  @return url("#{$path + $file}");
}

/**
 * Inline SVG as data URI
 * - skip the xmlns attribute on the svg root node
 * Ex: background: svg('<svg width="10" height="10"><circle r="5" cy="5" cx="5" fill="#00f"/></svg>');
 */
@function svg($svg) {
  $svg: str-replace($svg, '<svg ', '<svg xmlns="http://www.w3.org/2000/svg" ');
  @return url('data:image/svg+xml,' + str-replace($svg, '#', '%23'));
}
